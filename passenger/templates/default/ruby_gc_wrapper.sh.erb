#!/bin/sh

# wrap ruby with gc tuning parameters

export RUBY_HEAP_MIN_SLOTS=<%= @node[:ruby_gc][:heap_min_slots] %>
export RUBY_HEAP_SLOTS_INCREMENT=<%= @node[:ruby_gc][:heap_slots_increment] %>
export RUBY_HEAP_SLOTS_GROWTH_FACTOR=<%= @node[:ruby_gc][:heap_slots_growth_factor] %>
export RUBY_GC_MALLOC_LIMIT=<%= @node[:ruby_gc][:malloc_limit] %>
export RUBY_HEAP_FREE_MIN=<%= @node[:ruby_gc][:heap_free_min] %>
exec "<%= @node[:languages][:ruby][:ruby_bin] %>" "$@"
